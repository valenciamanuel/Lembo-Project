<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Listar Asociaciones</title>
    <link rel="stylesheet" href="/fronted/public/css/pages/visualizar/listar_asociacion.css">
</head>
<body>
    <h1>Listado de Asociaciones</h1>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Responsable</th>
                    <th>Nombre Asociación</th>
                    <th>Inversión</th>
                    <th>Meta</th>
                    <th>Inicio Producción</th>
                    <th>Fin Producción</th>
                    <th>Cultivo</th>
                    <th>Sensores</th>
                    <th>Insumos</th>
                    <th>Ciclo Cultivo</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody id="tabla-asociaciones">
                <!-- Aquí se insertarán los datos -->
            </tbody>
        </table>
    </div>

    <script>
        fetch('http://localhost:3000/asociaciones/listar')
            .then(response => response.json())
            .then(data => {
                const tabla = document.getElementById('tabla-asociaciones');
                tabla.innerHTML = ''; // Asegura que se limpie antes de agregar

                data.forEach(asociacion => {
                    const fila = document.createElement('tr');
                    fila.innerHTML = `
                        <td>${asociacion.responsable}</td>
                        <td>${asociacion.nombre_asociacion}</td>
                        <td>$${asociacion.inversion}</td>
                        <td>$${asociacion.meta}</td>
                        <td>${asociacion.iniico_produccion}</td>
                        <td>${asociacion.fin_produccion}</td>
                        <td>${asociacion.cultivo}</td>
                        <td>${asociacion.sensores}</td>
                        <td>${asociacion.insumos}</td>
                        <td>${asociacion.ciclo_cultivo}</td>
                       <td><a href="visualizar_asociacion.html?id=${asociacion.id}" class="boton-detalles">Ver Detalles</a></td>`;
                    tabla.appendChild(fila);
                });
            })
            .catch(err => {
                console.error("Error al cargar las asociaciones:", err);
            });
    </script>
</body>
</html>
